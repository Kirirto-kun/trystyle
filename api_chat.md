```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:

**–¢–∞–±–ª–∏—Ü–∞ `chats`:**
- `id` (Primary Key)
- `title` - –ù–∞–∑–≤–∞–Ω–∏–µ —á–∞—Ç–∞
- `user_id` (Foreign Key) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `created_at` - –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
- `updated_at` - –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–¢–∞–±–ª–∏—Ü–∞ `messages`:**
- `id` (Primary Key)
- `content` - –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `role` - –†–æ–ª—å (`user` –∏–ª–∏ `assistant`)
- `chat_id` (Foreign Key) - ID —á–∞—Ç–∞
- `created_at` - –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è

---

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

**–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã —Ç—Ä–µ–±—É—é—Ç JWT —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ:**

```http
Authorization: Bearer <your_jwt_token>
```

**–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è/–≤—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ `/api/v1/auth/login`
2. –ü–æ–ª—É—á–∞–µ—Ç JWT —Ç–æ–∫–µ–Ω
3. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–∫–µ–Ω –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —á–∞—Ç—É

---

## üì° API Endpoints

### Base URL: `/api/v1/chats`


### 2. üìã –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —á–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```http
GET /api/v1/chats/
```

**Response (200):**
```json
[
  {
    "id": 1,
    "title": "–ü–æ–∏—Å–∫ –æ–¥–µ–∂–¥—ã",
    "user_id": 123,
    "created_at": "2024-01-15T10:30:00Z",
    "updated_at": "2024-01-15T11:45:00Z"
  },
  {
    "id": 2,
    "title": "–°—Ç–∏–ª—å–Ω—ã–µ –æ–±—Ä–∞–∑—ã",
    "user_id": 123,
    "created_at": "2024-01-14T15:20:00Z",
    "updated_at": "2024-01-14T16:10:00Z"
  }
]
```

### 3. üí¨ –ü–æ–ª—É—á–∏—Ç—å —á–∞—Ç —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

```http
GET /api/v1/chats/{chat_id}
```

**Response (200):**
```json
{
  "id": 1,
  "title": "–ü–æ–∏—Å–∫ –æ–¥–µ–∂–¥—ã",
  "user_id": 123,
  "created_at": "2024-01-15T10:30:00Z",
  "updated_at": "2024-01-15T11:45:00Z",
  "messages": [
    {
      "id": 1,
      "content": "–ù–∞–π–¥–∏ –º–Ω–µ —á–µ—Ä–Ω—É—é —Ñ—É—Ç–±–æ–ª–∫—É",
      "role": "user",
      "chat_id": 1,
      "created_at": "2024-01-15T10:31:00Z"
    },
    {
      "id": 2,
      "content": "{\"result\": {\"products\": [...]}}",
      "role": "assistant",
      "chat_id": 1,
      "created_at": "2024-01-15T10:31:30Z"
    }
  ]
}
```

### 4. üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç

```http
POST /api/v1/chats/{chat_id}/messages
```

**Request Body:**
```json
{
  "message": "–ù–∞–π–¥–∏ –º–Ω–µ –∫—Ä–∞—Å–∏–≤–æ–µ –ø–ª–∞—Ç—å–µ –¥–ª—è —Å–≤–∏–¥–∞–Ω–∏—è"
}
```

**Response (200):**
```json
{
  "id": 3,
  "content": "{\"result\": {\"products\": [...]}, \"agent_type\": \"search\", \"processing_time_ms\": 1245.6}",
  "role": "assistant",
  "chat_id": 1,
  "created_at": "2024-01-15T10:32:00Z"
}
```

### 5. üì® –ü–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞

```http
GET /api/v1/chats/{chat_id}/messages
```

**Response (200):**
```json
[
  {
    "id": 1,
    "content": "–ß—Ç–æ –º–Ω–µ –Ω–∞–¥–µ—Ç—å —Å–µ–≥–æ–¥–Ω—è?",
    "role": "user",
    "chat_id": 1,
    "created_at": "2024-01-15T10:31:00Z"
  },
  {
    "id": 2,
    "content": "{\"result\": {\"outfit_description\": \"–°—Ç–∏–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ –¥–ª—è —Ä–∞–±–æ—Ç—ã\"}}",
    "role": "assistant",
    "chat_id": 1,
    "created_at": "2024-01-15T10:31:30Z"
  }
]
```

### 6. üóëÔ∏è –£–¥–∞–ª–∏—Ç—å —á–∞—Ç

```http
DELETE /api/v1/chats/{chat_id}
```

**Response (200):**
```json
{
  "message": "Chat deleted successfully"
}
```

### 7. üöÄ –°–æ–∑–¥–∞—Ç—å —á–∞—Ç —Å –ø–µ—Ä–≤—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º

```http
POST /api/v1/chats/init
```

**Request Body:**
```json
{
  "message": "–ü—Ä–∏–≤–µ—Ç! –ü–æ–º–æ–≥–∏ –º–Ω–µ —Å –º–æ–¥–æ–π"
}
```

**Response (201):**
```json
{
  "id": 4,
  "title": "–ü–æ–º–æ—â—å —Å –º–æ–¥–æ–π", // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫
  "user_id": 123,
  "created_at": "2024-01-15T10:35:00Z",
  "updated_at": "2024-01-15T10:35:30Z",
  "messages": [
    {
      "id": 7,
      "content": "–ü—Ä–∏–≤–µ—Ç! –ü–æ–º–æ–≥–∏ –º–Ω–µ —Å –º–æ–¥–æ–π",
      "role": "user",
      "chat_id": 4,
      "created_at": "2024-01-15T10:35:00Z"
    },
    {
      "id": 8,
      "content": "{\"result\": {\"response\": \"–ü—Ä–∏–≤–µ—Ç! –Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ —Å –º–æ–¥–æ–π!\"}}",
      "role": "assistant", 
      "chat_id": 4,
      "created_at": "2024-01-15T10:35:30Z"
    }
  ]
}
```

---